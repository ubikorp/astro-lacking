---
import { schedule } from '~/utils/tlo.ts';
import { twMerge } from 'tailwind-merge';

const {
  class: className = '',
} = Astro.props;

// Translate schedule
const airdates = schedule.map((airdate) => {
  const date = new Date(airdate.start_time).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
  const startTime = new Date(airdate.start_time).toLocaleTimeString('en-US', { hour: 'numeric', minute: 'numeric' });
  const endTime = new Date(airdate.end_time).toLocaleTimeString('en-US', { hour: 'numeric', minute: 'numeric' });
  const time = `${startTime} - ${endTime}`;
  const location = {
    kafm: 'KAFM Grand Junction 88.1 FM',
    ltw: 'Louder Than War Internet Radio',
    mixcloud: 'Streaming on Mixcloud'
  }[airdate.location];
  const url = {
    kafm: 'https://www.kafmradio.org',
    ltw: 'https://louderthanwar.com/louder-than-war-radio/',
    mixcloud: 'https://www.mixcloud.com/the-lacking-org/'
  }[airdate.location];
  return {
    date,
    time,
    location,
    url,
    notes: airdate.notes,
  };
});

---

<div
  class={twMerge("w-full shadow-xl dark:shadow-none", className)}
>

  <table class="min-w-full">
    <thead>
      <tr>
        <th class="text-left"><span class="ml-4">Date</span></th>
        <th class="text-left">Time</th>
        <th class="text-left">Location</th>
        <th class="text-left">Notes</th>
      </tr>
    </thead>
    <tbody>
      {airdates.map((airdate) => (
        <tr class="even:bg-white/5 odd:bg-black/5">
          <td>
            <div class="ml-4">
              { airdate.date }
            </div>
          </td>
          <td>
            <div class="ml-4">
              { airdate.time }
            </div>
          </td>
          <td>{ airdate.location }</td>
          <td>
            <div class="mr-4">
              { airdate.notes }
            </div>
          </td>
        </tr>
      ))}
    </tbody>
  </table>

</div>
